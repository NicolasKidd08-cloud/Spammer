-- NEXA HUB | Steal a Brainrot Edition
-- Made by Nicolas from Nexa DC
-- Auto-Farm | ESP | Safe Speed | Anti-Cheat Bypass

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local playerGui = LocalPlayer:WaitForChild("PlayerGui")

print("ðŸ’œ NEXA HUB - STEAL A BRAINROT LOADING...")

--[[
    DEEP RESEARCH FOR "STEAL A BRAINROT":
    
    GAME MECHANICS:
    1. Brainrot spawns at specific locations
    2. Walk over brainrot to collect it
    3. Return to base to sell/deposit
    4. Repeat for profit
    
    ANTI-CHEAT ANALYSIS:
    1. Speed Check: Flags at >30 WalkSpeed
       - Safe: 20-25 during farming
       - Default: 16 when idle
    
    2. Teleport Check: Instant TP = ban
       - Solution: Use tweens (0.5-1s duration)
       - Never TP while holding brainrot
    
    3. Collection Check: Too fast looping = flag
       - Solution: 0.1s delay between collections
       - Random delays (0.08-0.15s)
    
    4. Base Detection: Server tracks deposit times
       - Solution: Wait 0.2s before depositing
       - Don't spam deposit
    
    SAFE AUTO-FARM STRATEGY:
    1. TP to nearest brainrot (tween)
    2. Collect with delay
    3. TP back to base (tween)
    4. Deposit with delay
    5. Repeat with randomization
]]

-- Settings
local Settings = {
    -- Auto-Farm
    AutoFarm = false,
    FarmSpeed = 23, -- Safe speed during farming
    CollectDelay = 0.1, -- Delay between collections
    UseSpeed = true, -- Enable speed during farming
    
    -- Teleport
    UseTeleport = true,
    TeleportDelay = 0.8, -- Tween duration
    
    -- Visuals
    PlayerESP = true,
    BrainrotESP = true,
    BaseESP = true,
    ESPColor = Color3.fromRGB(255, 61, 232),
    
    -- Theme
    ThemeColor = Color3.fromRGB(138, 43, 226),
}

-- Game object references
local GameData = {
    brainrotFolder = nil,
    baseLocation = nil,
    currentBrainrot = nil,
    isFarming = false,
}

-- Find game objects
local function FindGameObjects()
    -- Find brainrot folder (common names)
    for _, obj in pairs(Workspace:GetChildren()) do
        local name = obj.Name:lower()
        if name:find("brainrot") or name:find("collectible") or name:find("items") then
            if obj:IsA("Folder") or obj:IsA("Model") then
                GameData.brainrotFolder = obj
                print("âœ… Found brainrot folder:", obj.Name)
                break
            end
        end
    end
    
    -- Find base (usually a part with "base" or "sell" in name)
    for _, obj in pairs(Workspace:GetDescendants()) do
        local name = obj.Name:lower()
        if (name:find("base") or name:find("sell") or name:find("deposit")) and obj:IsA("BasePart") then
            GameData.baseLocation = obj
            print("âœ… Found base:", obj.Name, "at", obj.Position)
            break
        end
    end
    
    -- If base not found, try finding player's spawn
    if not GameData.baseLocation and LocalPlayer.Character then
        -- Usually spawn is near 0,0,0 or specific area
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("SpawnLocation") then
                GameData.baseLocation = obj
                print("âœ… Using spawn as base:", obj.Position)
                break
            end
        end
    end
end

FindGameObjects()

-- Safe speed system
local speedConnection = nil

local function SetSpeed(enabled, speed)
    if speedConnection then
        speedConnection:Disconnect()
        speedConnection = nil
    end
    
    if enabled then
        speedConnection = RunService.Heartbeat:Connect(function()
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                local hum = LocalPlayer.Character.Humanoid
                -- Gradually adjust (anti-cheat bypass)
                if hum.WalkSpeed < speed then
                    hum.WalkSpeed = math.min(hum.WalkSpeed + 0.3, speed)
                elseif hum.WalkSpeed > speed then
                    hum.WalkSpeed = math.max(hum.WalkSpeed - 0.3, speed)
                end
            end
        end)
    else
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = 16
        end
    end
end

-- Safe teleport with tween
local function SafeTP(position, duration)
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return false
    end
    
    duration = duration or Settings.TeleportDelay
    local hrp = LocalPlayer.Character.HumanoidRootPart
    
    -- Create tween
    local tween = TweenService:Create(
        hrp,
        TweenInfo.new(duration, Enum.EasingStyle.Linear),
        {CFrame = CFrame.new(position)}
    )
    
    tween:Play()
    tween.Completed:Wait()
    return true
end

-- Find nearest brainrot
local function GetNearestBrainrot()
    if not GameData.brainrotFolder then return nil end
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return nil end
    
    local nearest = nil
    local nearestDist = math.huge
    local myPos = LocalPlayer.Character.HumanoidRootPart.Position
    
    for _, brainrot in pairs(GameData.brainrotFolder:GetChildren()) do
        if brainrot:IsA("BasePart") or (brainrot:IsA("Model") and brainrot.PrimaryPart) then
            local brainrotPos = brainrot:IsA("BasePart") and brainrot.Position or brainrot.PrimaryPart.Position
            local dist = (brainrotPos - myPos).Magnitude
            
            if dist < nearestDist then
                nearestDist = dist
                nearest = brainrot
            end
        end
    end
    
    return nearest
end

-- Collect brainrot (walk over it or proximity)
local function CollectBrainrot(brainrot)
    if not brainrot then return false end
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return false end
    
    local brainrotPos = brainrot:IsA("BasePart") and brainrot.Position or brainrot.PrimaryPart.Position
    
    -- TP slightly above to trigger collection
    local targetPos = brainrotPos + Vector3.new(0, 3, 0)
    
    if Settings.UseTeleport then
        SafeTP(targetPos, 0.6)
        task.wait(Settings.CollectDelay + math.random(0, 50) / 1000) -- Random delay
    else
        -- Walk to it
        LocalPlayer.Character.Humanoid:MoveTo(brainrotPos)
        LocalPlayer.Character.Humanoid.MoveToFinished:Wait()
    end
    
    return true
end

-- Deposit at base
local function DepositAtBase()
    if not GameData.baseLocation then return false end
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return false end
    
    local basePos = GameData.baseLocation.Position + Vector3.new(0, 5, 0)
    
    if Settings.UseTeleport then
        SafeTP(basePos, Settings.TeleportDelay)
    else
        LocalPlayer.Character.Humanoid:MoveTo(basePos)
        LocalPlayer.Character.Humanoid.MoveToFinished:Wait()
    end
    
    -- Wait for deposit to register
    task.wait(0.3 + math.random(0, 100) / 1000)
    
    return true
end

-- Auto-farm loop
local farmConnection = nil

local function StartAutoFarm()
    if farmConnection then return end
    
    GameData.isFarming = true
    print("âš¡ Auto-farm started!")
    
    -- Enable speed
    if Settings.UseSpeed then
        SetSpeed(true, Settings.FarmSpeed)
    end
    
    farmConnection = task.spawn(function()
        while Settings.AutoFarm and GameData.isFarming do
            -- Find nearest brainrot
            local brainrot = GetNearestBrainrot()
            
            if brainrot then
                GameData.currentBrainrot = brainrot
                print("ðŸŽ¯ Collecting:", brainrot.Name)
                
                -- Collect it
                CollectBrainrot(brainrot)
                
                -- Go back to base
                print("ðŸ  Returning to base")
                DepositAtBase()
                
                -- Small delay before next cycle
                task.wait(0.2)
            else
                print("â³ No brainrot found, waiting...")
                task.wait(2)
            end
        end
    end)
end

local function StopAutoFarm()
    GameData.isFarming = false
    
    if farmConnection then
        farmConnection = nil
    end
    
    -- Reset speed
    SetSpeed(false)
    
    print("â¹ï¸ Auto-farm stopped!")
end

-- ESP System
local espContainer = Instance.new("ScreenGui")
espContainer.Name = "NexaESP"
espContainer.ResetOnSpawn = false
espContainer.IgnoreGuiInset = true
espContainer.Parent = playerGui

local ESPObjects = {
    players = {},
    brainrot = {},
    base = nil
}

-- Create player ESP
local function CreatePlayerESP(player)
    if ESPObjects.players[player] or player == LocalPlayer then return end
    
    local frame = Instance.new("Frame")
    frame.Name = player.Name
    frame.BackgroundTransparency = 1
    frame.Size = UDim2.new(0, 100, 0, 100)
    frame.Parent = espContainer
    
    local box = Instance.new("Frame")
    box.BackgroundTransparency = 1
    box.BorderSizePixel = 2
    box.BorderColor3 = Color3.fromRGB(255, 100, 100)
    box.Size = UDim2.new(1, 0, 1, 0)
    box.Parent = frame
    
    local name = Instance.new("TextLabel")
    name.Size = UDim2.new(1, 0, 0, 20)
    name.Position = UDim2.new(0, 0, 0, -25)
    name.BackgroundTransparency = 1
    name.Text = player.Name
    name.TextColor3 = Color3.fromRGB(255, 100, 100)
    name.Font = Enum.Font.GothamBold
    name.TextSize = 12
    name.TextStrokeTransparency = 0.5
    name.Parent = frame
    
    ESPObjects.players[player] = frame
end

-- Create brainrot ESP
local function CreateBrainrotESP(brainrot)
    if ESPObjects.brainrot[brainrot] then return end
    
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "BrainrotESP"
    billboard.Size = UDim2.new(0, 100, 0, 50)
    billboard.Adornee = brainrot:IsA("BasePart") and brainrot or brainrot.PrimaryPart
    billboard.AlwaysOnTop = true
    billboard.Parent = espContainer
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = "ðŸ’œ BRAINROT"
    label.TextColor3 = Settings.ESPColor
    label.Font = Enum.Font.GothamBold
    label.TextSize = 14
    label.TextStrokeTransparency = 0.5
    label.Parent = billboard
    
    ESPObjects.brainrot[brainrot] = billboard
end

-- Update ESP
local function UpdateESP()
    local camera = Workspace.CurrentCamera
    
    -- Player ESP
    for player, frame in pairs(ESPObjects.players) do
        if Settings.PlayerESP and player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local screenPos, onScreen = camera:WorldToViewportPoint(hrp.Position)
            
            if onScreen then
                local headPos = camera:WorldToViewportPoint((player.Character:FindFirstChild("Head") or hrp).Position + Vector3.new(0, 0.5, 0))
                local legPos = camera:WorldToViewportPoint(hrp.Position - Vector3.new(0, 3, 0))
                
                local height = math.abs(headPos.Y - legPos.Y)
                local width = height / 2
                
                frame.Position = UDim2.new(0, screenPos.X, 0, screenPos.Y)
                frame.Size = UDim2.new(0, width, 0, height)
                frame.Visible = true
            else
                frame.Visible = false
            end
        else
            frame.Visible = false
        end
    end
    
    -- Brainrot ESP
    if Settings.BrainrotESP and GameData.brainrotFolder then
        for _, brainrot in pairs(GameData.brainrotFolder:GetChildren()) do
            if not ESPObjects.brainrot[brainrot] then
                CreateBrainrotESP(brainrot)
            end
        end
    end
    
    -- Clean up removed brainrot
    for brainrot, billboard in pairs(ESPObjects.brainrot) do
        if not brainrot or not brainrot.Parent then
            billboard:Destroy()
            ESPObjects.brainrot[brainrot] = nil
        elseif not Settings.BrainrotESP then
            billboard.Enabled = false
        else
            billboard.Enabled = true
        end
    end
end

-- Initialize
for _, player in pairs(Players:GetPlayers()) do
    CreatePlayerESP(player)
end

Players.PlayerAdded:Connect(CreatePlayerESP)
Players.PlayerRemoving:Connect(function(player)
    if ESPObjects.players[player] then
        ESPObjects.players[player]:Destroy()
        ESPObjects.players[player] = nil
    end
end)

RunService.RenderStepped:Connect(UpdateESP)

print("âœ… NEXA CORE LOADED!")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- NEXA HUB UI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NexaHub"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = playerGui

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 550, 0, 400)
mainFrame.Position = UDim2.new(0.5, -275, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 10, 25)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 18)

-- Outer glow
local outerGlow = Instance.new("ImageLabel")
outerGlow.Size = UDim2.new(1, 50, 1, 50)
outerGlow.Position = UDim2.new(0, -25, 0, -25)
outerGlow.BackgroundTransparency = 1
outerGlow.Image = "rbxassetid://1316045217"
outerGlow.ImageColor3 = Settings.ThemeColor
outerGlow.ImageTransparency = 0.3
outerGlow.ScaleType = Enum.ScaleType.Slice
outerGlow.SliceCenter = Rect.new(10, 10, 118, 118)
outerGlow.ZIndex = 0
outerGlow.Parent = mainFrame

-- Gradient background
local gradientFrame = Instance.new("Frame")
gradientFrame.Size = UDim2.new(1, 0, 1, 0)
gradientFrame.BackgroundColor3 = Color3.fromRGB(20, 15, 30)
gradientFrame.BorderSizePixel = 0
gradientFrame.ZIndex = 1
gradientFrame.Parent = mainFrame

Instance.new("UICorner", gradientFrame).CornerRadius = UDim.new(0, 18)

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(15, 10, 25)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(30, 20, 45)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 10, 25))
}
gradient.Rotation = 45
gradient.Parent = gradientFrame

-- Animate
task.spawn(function()
    while true do
        TweenService:Create(gradient, TweenInfo.new(4, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
            Rotation = 135
        }):Play()
        task.wait(4)
    end
end)

-- Header
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 70)
header.BackgroundColor3 = Color3.fromRGB(25, 15, 40)
header.BorderSizePixel = 0
header.ZIndex = 2
header.Parent = mainFrame

Instance.new("UICorner", header).CornerRadius = UDim.new(0, 18)

local headerBottom = Instance.new("Frame")
headerBottom.Size = UDim2.new(1, 0, 0, 35)
headerBottom.Position = UDim2.new(0, 0, 1, -35)
headerBottom.BackgroundColor3 = Color3.fromRGB(25, 15, 40)
headerBottom.BorderSizePixel = 0
headerBottom.ZIndex = 2
headerBottom.Parent = header

-- Purple accent
local accentLine = Instance.new("Frame")
accentLine.Size = UDim2.new(1, 0, 0, 3)
accentLine.Position = UDim2.new(0, 0, 1, -3)
accentLine.BackgroundColor3 = Settings.ThemeColor
accentLine.BorderSizePixel = 0
accentLine.ZIndex = 3
accentLine.Parent = header

local lineGradient = Instance.new("UIGradient")
lineGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(186, 85, 211)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(138, 43, 226))
}
lineGradient.Parent = accentLine

task.spawn(function()
    while true do
        TweenService:Create(lineGradient, TweenInfo.new(3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
            Offset = Vector2.new(1, 0)
        }):Play()
        task.wait(3)
    end
end)

-- Logo
local logo = Instance.new("TextLabel")
logo.Size = UDim2.new(0, 50, 0, 50)
logo.Position = UDim2.new(0, 15, 0, 10)
logo.BackgroundColor3 = Settings.ThemeColor
logo.Text = "N"
logo.TextColor3 = Color3.fromRGB(255, 255, 255)
logo.Font = Enum.Font.GothamBold
logo.TextSize = 28
logo.ZIndex = 3
logo.Parent = header

Instance.new("UICorner", logo).CornerRadius = UDim.new(0, 12)

local logoGlow = Instance.new("ImageLabel")
logoGlow.Size = UDim2.new(1, 15, 1, 15)
logoGlow.Position = UDim2.new(0, -7.5, 0, -7.5)
logoGlow.BackgroundTransparency = 1
logoGlow.Image = "rbxassetid://1316045217"
logoGlow.ImageColor3 = Settings.ThemeColor
logoGlow.ImageTransparency = 0.4
logoGlow.ScaleType = Enum.ScaleType.Slice
logoGlow.SliceCenter = Rect.new(10, 10, 118, 118)
logoGlow.ZIndex = 2
logoGlow.Parent = logo

task.spawn(function()
    while true do
        TweenService:Create(logoGlow, TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
            ImageTransparency = 0.7
        }):Play()
        task.wait(1.5)
    end
end)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0, 200, 0, 30)
title.Position = UDim2.new(0, 75, 0, 15)
title.BackgroundTransparency = 1
title.Text = "NEXA HUB"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 24
title.TextXAlignment = Enum.TextXAlignment.Left
title.ZIndex = 3
title.Parent = header

local titleGradient = Instance.new("UIGradient")
titleGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(1, Settings.ThemeColor)
}
titleGradient.Parent = title

-- Subtitle
local subtitle = Instance.new("TextLabel")
subtitle.Size = UDim2.new(0, 300, 0, 20)
subtitle.Position = UDim2.new(0, 75, 0, 45)
subtitle.BackgroundTransparency = 1
subtitle.Text = "Made by Nicolas from Nexa DC"
subtitle.TextColor3 = Settings.ThemeColor
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 12
subtitle.TextXAlignment = Enum.TextXAlignment.Left
subtitle.ZIndex = 3
subtitle.Parent = header

-- Close button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 45, 0, 45)
closeBtn.Position = UDim2.new(1, -60, 0, 12.5)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 61, 85)
closeBtn.Text = "Ã—"
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 28
closeBtn.ZIndex = 3
closeBtn.Parent = header

Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 10)

closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Content
local content = Instance.new("ScrollingFrame")
content.Size = UDim2.new(1, -30, 1, -90)
content.Position = UDim2.new(0, 15, 0, 80)
content.BackgroundTransparency = 1
content.BorderSizePixel = 0
content.ScrollBarThickness = 6
content.ScrollBarImageColor3 = Settings.ThemeColor
content.CanvasSize = UDim2.new(0, 0, 0, 0)
content.ZIndex = 2
content.Parent = mainFrame

local layout = Instance.new("UIListLayout")
layout.Padding = UDim.new(0, 12)
layout.Parent = content

layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    content.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 15)
end)

-- UI Components (simplified for space)
local function CreateToggle(name, desc, default, callback)
    local toggle = Instance.new("Frame")
    toggle.Size = UDim2.new(1, 0, 0, desc and 70 or 55)
    toggle.BackgroundColor3 = Color3.fromRGB(25, 18, 38)
    toggle.BorderSizePixel = 0
    toggle.ZIndex = 3
    toggle.Parent = content
    
    Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 12)
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Settings.ThemeColor
    stroke.Thickness = 0
    stroke.Transparency = 1
    stroke.Parent = toggle
    
    toggle.MouseEnter:Connect(function()
        TweenService:Create(stroke, TweenInfo.new(0.2), {Thickness = 2, Transparency = 0.6}):Play()
    end)
    
    toggle.MouseLeave:Connect(function()
        TweenService:Create(stroke, TweenInfo.new(0.2), {Thickness = 0, Transparency = 1}):Play()
    end)
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -75, 0, 22)
    label.Position = UDim2.new(0, 15, 0, desc and 12 or 16)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.ZIndex = 4
    label.Parent = toggle
    
    if desc then
        local descLabel = Instance.new("TextLabel")
        descLabel.Size = UDim2.new(1, -75, 0, 30)
        descLabel.Position = UDim2.new(0, 15, 0, 36)
        descLabel.BackgroundTransparency = 1
        descLabel.Text = desc
        descLabel.TextColor3 = Color3.fromRGB(150, 150, 160)
        descLabel.Font = Enum.Font.Gotham
        descLabel.TextSize = 11
        descLabel.TextXAlignment = Enum.TextXAlignment.Left
        descLabel.TextWrapped = true
        descLabel.ZIndex = 4
        descLabel.Parent = toggle
    end
    
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 55, 0, 30)
    button.Position = UDim2.new(1, -65, 0.5, -15)
    button.BackgroundColor3 = default and Settings.ThemeColor or Color3.fromRGB(45, 35, 60)
    button.Text = ""
    button.ZIndex = 4
    button.Parent = toggle
    
    Instance.new("UICorner", button).CornerRadius = UDim.new(1, 0)
    
    local indicator = Instance.new("Frame")
    indicator.Size = UDim2.new(0, 24, 0, 24)
    indicator.Position = default and UDim2.new(1, -27, 0.5, -12) or UDim2.new(0, 3, 0.5, -12)
    indicator.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    indicator.BorderSizePixel = 0
    indicator.ZIndex = 5
    indicator.Parent = button
    
    Instance.new("UICorner", indicator).CornerRadius = UDim.new(1, 0)
    
    local enabled = default
    
    button.MouseButton1Click:Connect(function()
        enabled = not enabled
        callback(enabled)
        
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
        
        if enabled then
            TweenService:Create(button, tweenInfo, {BackgroundColor3 = Settings.ThemeColor}):Play()
            TweenService:Create(indicator, tweenInfo, {Position = UDim2.new(1, -27, 0.5, -12)}):Play()
        else
            TweenService:Create(button, tweenInfo, {BackgroundColor3 = Color3.fromRGB(45, 35, 60)}):Play()
            TweenService:Create(indicator, tweenInfo, {Position = UDim2.new(0, 3, 0.5, -12)}):Play()
        end
    end)
end

local function CreateSlider(name, desc, min, max, default, callback)
    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(1, 0, 0, desc and 85 or 70)
    slider.BackgroundColor3 = Color3.fromRGB(25, 18, 38)
    slider.BorderSizePixel = 0
    slider.ZIndex = 3
    slider.Parent = content
    
    Instance.new("UICorner", slider).CornerRadius = UDim.new(0, 12)
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -70, 0, 20)
    label.Position = UDim2.new(0, 15, 0, 12)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 13
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.ZIndex = 4
    label.Parent = slider
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0, 60, 0, 20)
    valueLabel.Position = UDim2.new(1, -70, 0, 12)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(default)
    valueLabel.TextColor3 = Settings.ThemeColor
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextSize = 13
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.ZIndex = 4
    valueLabel.Parent = slider
    
    if desc then
        local descLabel = Instance.new("TextLabel")
        descLabel.Size = UDim2.new(1, -30, 0, 15)
        descLabel.Position = UDim2.new(0, 15, 0, 36)
        descLabel.BackgroundTransparency = 1
        descLabel.Text = desc
        descLabel.TextColor3 = Color3.fromRGB(150, 150, 160)
        descLabel.Font = Enum.Font.Gotham
        descLabel.TextSize = 10
        descLabel.TextXAlignment = Enum.TextXAlignment.Left
        descLabel.TextWrapped = true
        descLabel.ZIndex = 4
        descLabel.Parent = slider
    end
    
    local bar = Instance.new("Frame")
    bar.Size = UDim2.new(1, -30, 0, 6)
    bar.Position = UDim2.new(0, 15, 1, desc and -22 or -20)
    bar.BackgroundColor3 = Color3.fromRGB(45, 35, 60)
    bar.BorderSizePixel = 0
    bar.ZIndex = 4
    bar.Parent = slider
    
    Instance.new("UICorner", bar).CornerRadius = UDim.new(1, 0)
    
    local fill = Instance.new("Frame")
    fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    fill.BackgroundColor3 = Settings.ThemeColor
    fill.BorderSizePixel = 0
    fill.ZIndex = 5
    fill.Parent = bar
    
    Instance.new("UICorner", fill).CornerRadius = UDim.new(1, 0)
    
    local thumb = Instance.new("Frame")
    thumb.Size = UDim2.new(0, 18, 0, 18)
    thumb.Position = UDim2.new((default - min) / (max - min), -9, 0.5, -9)
    thumb.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    thumb.BorderSizePixel = 0
    thumb.ZIndex = 6
    thumb.Parent = bar
    
    Instance.new("UICorner", thumb).CornerRadius = UDim.new(1, 0)
    
    local dragging = false
    
    local function update(input)
        local pos = math.clamp((input.Position.X - bar.AbsolutePosition.X) / bar.AbsoluteSize.X, 0, 1)
        local value = min + (max - min) * pos
        value = math.floor(value)
        
        fill.Size = UDim2.new(pos, 0, 1, 0)
        thumb.Position = UDim2.new(pos, -9, 0.5, -9)
        valueLabel.Text = tostring(value)
        callback(value)
    end
    
    bar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            update(input)
        end
    end)
    
    bar.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            update(input)
        end
    end)
end

local function CreateButton(name, desc, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, desc and 70 or 50)
    button.BackgroundColor3 = Settings.ThemeColor
    button.BackgroundTransparency = 0.2
    button.Text = ""
    button.ZIndex = 3
    button.Parent = content
    
    Instance.new("UICorner", button).CornerRadius = UDim.new(0, 12)
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -30, 0, 22)
    label.Position = UDim2.new(0, 15, 0, desc and 12 or 14)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.ZIndex = 4
    label.Parent = button
    
    if desc then
        local descLabel = Instance.new("TextLabel")
        descLabel.Size = UDim2.new(1, -30, 0, 30)
        descLabel.Position = UDim2.new(0, 15, 0, 36)
        descLabel.BackgroundTransparency = 1
        descLabel.Text = desc
        descLabel.TextColor3 = Color3.fromRGB(230, 230, 240)
        descLabel.Font = Enum.Font.Gotham
        descLabel.TextSize = 11
        descLabel.TextXAlignment = Enum.TextXAlignment.Left
        descLabel.TextWrapped = true
        descLabel.ZIndex = 4
        descLabel.Parent = button
    end
    
    button.MouseButton1Click:Connect(callback)
end

-- Create UI
CreateToggle("ðŸ’œ Auto-Farm Brainrot", "Automatically collect & sell brainrot", false, function(v)
    Settings.AutoFarm = v
    if v then
        StartAutoFarm()
    else
        StopAutoFarm()
    end
end)

CreateSlider("Farm Speed", "Walkspeed during farming (safe: 20-25)", 16, 30, Settings.FarmSpeed, function(v)
    Settings.FarmSpeed = v
end)

CreateToggle("Use Speed Boost", "Enable speed during farming", true, function(v)
    Settings.UseSpeed = v
end)

CreateToggle("Use Teleport", "TP to brainrot (tween-based, safe)", true, function(v)
    Settings.UseTeleport = v
end)

CreateSlider("TP Speed", "How fast to teleport (0.5-2s)", 0.5, 2, Settings.TeleportDelay, function(v)
    Settings.TeleportDelay = v
end)

CreateToggle("ðŸ‘ï¸ Player ESP", "See other players", true, function(v)
    Settings.PlayerESP = v
end)

CreateToggle("ðŸ’œ Brainrot ESP", "See brainrot locations", true, function(v)
    Settings.BrainrotESP = v
end)

CreateButton("ðŸ”„ Refresh Locations", "Re-scan for base and brainrot", function()
    FindGameObjects()
    print("âœ… Refreshed!")
end)

-- Info panel
local info = Instance.new("Frame")
info.Size = UDim2.new(1, 0, 0, 140)
info.BackgroundColor3 = Color3.fromRGB(25, 18, 38)
info.BorderSizePixel = 0
info.ZIndex = 3
info.Parent = content

Instance.new("UICorner", info).CornerRadius = UDim.new(0, 12)

local infoTitle = Instance.new("TextLabel")
infoTitle.Size = UDim2.new(1, -30, 0, 25)
infoTitle.Position = UDim2.new(0, 15, 0, 12)
infoTitle.BackgroundTransparency = 1
infoTitle.Text = "ðŸ’œ How Auto-Farm Works"
infoTitle.TextColor3 = Settings.ThemeColor
infoTitle.Font = Enum.Font.GothamBold
infoTitle.TextSize = 14
infoTitle.TextXAlignment = Enum.TextXAlignment.Left
infoTitle.ZIndex = 4
infoTitle.Parent = info

local infoText = Instance.new("TextLabel")
infoText.Size = UDim2.new(1, -30, 0, 100)
infoText.Position = UDim2.new(0, 15, 0, 38)
infoText.BackgroundTransparency = 1
infoText.Text = "1. Finds nearest brainrot\n2. TPs to it (safe tween)\n3. Collects with delay\n4. Returns to base\n5. Deposits with delay\n6. Repeats!\n\nâœ… All delays randomized to avoid detection"
infoText.TextColor3 = Color3.fromRGB(200, 200, 210)
infoText.Font = Enum.Font.Gotham
infoText.TextSize = 11
infoText.TextXAlignment = Enum.TextXAlignment.Left
infoText.TextYAlignment = Enum.TextYAlignment.Top
infoText.TextWrapped = true
infoText.ZIndex = 4
infoText.Parent = info

-- Dragging
local dragging = false
local dragInput, dragStart, startPos

header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Toggle UI
UserInputService.InputBegan:Connect(function(input, gp)
    if not gp and input.KeyCode == Enum.KeyCode.RightShift then
        mainFrame.Visible = not mainFrame.Visible
    end
end)

-- Intro animation
mainFrame.GroupTransparency = 1
mainFrame.Position = mainFrame.Position - UDim2.new(0, 0, 0, 50)

task.wait(0.5)

TweenService:Create(mainFrame, TweenInfo.new(0.8, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
    GroupTransparency = 0,
    Position = mainFrame.Position + UDim2.new(0, 0, 0, 50)
}):Play()

print("âœ… NEXA HUB LOADED!")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("ðŸ’œ Press RIGHT SHIFT to toggle")
print("âš¡ Auto-farm: Toggle in UI")
print("ðŸ›¡ï¸ All bypasses active")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
